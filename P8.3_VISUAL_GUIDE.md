# Reward Evolution System - Visual Guide

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     REWARD EVOLUTION FLOW                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User creates â”‚
â”‚   reward     â”‚â”€â”€â–º evolutionState: 0 (Seed)
â”‚              â”‚    evolutionPromptedAt: null
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    evolutionDeclinedAt: null
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User redeems     â”‚
â”‚ reward 3x in     â”‚
â”‚ 7 days           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ shouldPromptEvolution() checks:     â”‚
â”‚ âœ“ State = 0?                        â”‚
â”‚ âœ“ 3+ redemptions in 7 days?         â”‚
â”‚ âœ“ Not declined in last 14 days?     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ NO â”€â”€â–º Don't show modal
       â”‚
       â””â”€â”€â”€ YES â”€â”€â”
                  â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  Evolution Modal     â”‚
       â”‚  ğŸ’« Want to level    â”‚
       â”‚  up "[Reward]"?      â”‚
       â”‚                      â”‚
       â”‚  Current â†’ Evolved   â”‚
       â”‚                      â”‚
       â”‚  [Evolve] [Keep]     â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚       â”‚
       Accept â”‚       â”‚ Decline
              â–¼       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Update:    â”‚  â”‚ Update:        â”‚
    â”‚ - title    â”‚  â”‚ - declined_at  â”‚
    â”‚ - desc     â”‚  â”‚ - prompted_at  â”‚
    â”‚ - stateâ†’1  â”‚  â”‚ State: 0       â”‚
    â”‚ - telemetryâ”‚  â”‚ - telemetry    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â””â”€â”€â–º Wait 14 days
                                before asking
                                again
```

## Evolution States

```
STATE 0: ğŸŒ± SEED (Initial)
â”œâ”€â–º Example: "Morning Coffee"
â””â”€â–º Description: Basic reward

STATE 1: âœ¨ INTENTIONAL (After 1st evolution)
â”œâ”€â–º Example: "Morning Coffee + 1 gratitude"
â””â”€â–º Description: Adds mindfulness element

STATE 2: ğŸš€ ELEVATED (Future)
â”œâ”€â–º Example: "Morning Coffee + 1 gratitude + structure"
â””â”€â–º Description: Adds light structure/pairing

STATE 3: ğŸ† TRANSFORMATIVE (Future)
â”œâ”€â–º Example: Advanced evolution
â””â”€â–º Description: Full transformation
```

## Category-Specific Evolution Patterns

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CATEGORY  â”‚ PATTERN           â”‚ EXAMPLE                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ˜´ Rest   â”‚ + 1 gratitude     â”‚ Nap â†’ Nap + 1 gratitude      â”‚
â”‚ ğŸ® Fun    â”‚ Intentional X     â”‚ Games â†’ Intentional Games    â”‚
â”‚ ğŸ‘¥ Social â”‚ + share check-in  â”‚ Coffee â†’ Coffee + check-in   â”‚
â”‚ ğŸ“š Growth â”‚ + 1 note          â”‚ Reading â†’ Reading + 1 note   â”‚
â”‚ ğŸ« Treat  â”‚ + 1 reflection    â”‚ Chocolate â†’ Chocolate + ...  â”‚
â”‚ ğŸ§  Meta   â”‚ + 1 reflection    â”‚ Journal â†’ Journal + ...      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```
localStorage: lifegoal_rewards_{userId}
    â”‚
    â”œâ”€â–º fetchRewardCatalog()
    â”‚   â””â”€â–º Migrates old rewards (adds evolution fields)
    â”‚
    â”œâ”€â–º redeemReward()
    â”‚   â””â”€â–º Triggers shouldPromptEvolution()
    â”‚       â””â”€â–º Shows modal if criteria met
    â”‚
    â””â”€â–º evolveReward(accept: boolean)
        â”œâ”€â–º accept=true  â†’ getEvolutionSuggestion()
        â”‚                  â†’ Update title/description
        â”‚                  â†’ Increment state
        â”‚
        â””â”€â–º accept=false â†’ Set declinedAt timestamp
```

## Telemetry Events

```
reward_evolution_prompted
â”œâ”€â–º rewardId
â”œâ”€â–º category
â””â”€â–º redemptionCount

reward_evolution_accepted
â”œâ”€â–º rewardId
â”œâ”€â–º category
â””â”€â–º evolutionState (new state)

reward_evolution_declined
â”œâ”€â–º rewardId
â””â”€â–º category
```

## UI Components

```
RewardEvolutionModal
â”œâ”€â–º reward-evolution-modal (container)
â”‚   â”œâ”€â–º __backdrop (overlay)
â”‚   â””â”€â–º __content (card)
â”‚       â”œâ”€â–º __title
â”‚       â”œâ”€â–º __prompt
â”‚       â”œâ”€â–º __preview
â”‚       â”‚   â”œâ”€â–º __current
â”‚       â”‚   â”œâ”€â–º __arrow
â”‚       â”‚   â””â”€â–º __evolved
â”‚       â”‚       â””â”€â–º __description
â”‚       â””â”€â–º __actions
â”‚           â”œâ”€â–º __accept (primary)
â”‚           â””â”€â–º __decline (secondary)
```

## Key Business Rules

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RULE                           â”‚ IMPLEMENTATION          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Trigger after 3 redemptions    â”‚ Check last 7 days       â”‚
â”‚ Only prompt State 0 rewards    â”‚ evolutionState === 0    â”‚
â”‚ 14-day cooldown on decline     â”‚ declinedAt + 14 days    â”‚
â”‚ Max evolution state is 3       â”‚ Math.min(3, state + 1)  â”‚
â”‚ New rewards start at State 0   â”‚ Default in createReward â”‚
â”‚ Automatic migration            â”‚ In fetchRewardCatalog   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Example Scenario

```
Day 1:  Create "Morning Coffee" (State 0, cost: 10 gold)
Day 2:  Redeem (1/3) âœ“
Day 3:  Redeem (2/3) âœ“
Day 4:  Redeem (3/3) âœ“
        â””â”€â–º Modal appears! ğŸ’«
        
        User sees:
        "Morning Coffee" â†’ "Morning Coffee + 1 gratitude"
        
        [Choose Option]
        
Option A: Click "âœ¨ Evolve it"
â”œâ”€â–º Title updated
â”œâ”€â–º State = 1
â””â”€â–º Telemetry: reward_evolution_accepted

Option B: Click "Keep as-is"
â”œâ”€â–º Title unchanged
â”œâ”€â–º State = 0
â”œâ”€â–º declinedAt = now
â””â”€â–º Telemetry: reward_evolution_declined
    â””â”€â–º Won't ask again until Day 18 (14 days later)
```
