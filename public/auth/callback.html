<!doctype html>
<html>
<body>Signing you inâ€¦</body>
<script type="module">
  import { supabase } from "/assets/supaClient.js";

  // Wait for Supabase session (Google login completes here)
  const { data } = await supabase.auth.getSession();

  // If user is signed in, redirect to dashboard (or home if no dashboard exists yet)
  if (data?.session) {
    window.location.replace("/dashboard");
  }

  // Also listen in case the session appears slightly later
  supabase.auth.onAuthStateChange((_e, session) => {
    if (session) window.location.replace("/dashboard");
  });
</script>
</html>
